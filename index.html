<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Dzair Sourcing Cars App</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;700&family=Poppins:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: { extend: { colors: { dz: { 500: '#006233' } } } }
    }
  </script>
  <style>
    html, body { height:100%; min-height:100%; }
    body { background: #f6f7fb; font-family: 'Poppins', sans-serif; }
    .rtl { direction: rtl; font-family: 'Cairo', sans-serif; }
    .ltr { direction: ltr; font-family: 'Poppins', sans-serif; }
    .section { background: #fff; border-radius: 18px; margin-bottom: 12px; padding:18px 12px; box-shadow: 0 1px 6px 0 rgba(0,0,0,.07); }
    input[type="number"], input[type="text"] { width:100%; padding:9px 10px; border-radius:8px; border:1.5px solid #e0e4ea; outline:none; font-size:16px; }
    input[type="number"]:focus, input[type="text"]:focus { border-color:#006233; }
    .best-badge{ background:#dcfce7; color:#006233; font-size:10px; border-radius:7px; font-weight:600; margin-left:6px;padding:2px 7px;}
    .cta-tip{ background:#ecfdf5; color:#047857; border-radius:12px; padding:12px 8px; margin-bottom:8px; font-size:14px;text-align:left;}
    @media screen and (max-width:420px){
      .section,.cta-tip{padding-left:2vw;padding-right:2vw;}
    }
    ::-webkit-scrollbar {display:none;}
  </style>
</head>
<body>
  <div id="app"></div>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script type="text/babel">
    const {useState} = React;
    const translations = {
      fr:{
        title:"Dzair Sourcing Cars",
        subtitle:"Calcul co√ªt import alg√©rien",
        carPrice:"Prix V√©hicule (FOB)",
        currency:"Devise",
        freight:"Fret + Assurance",
        rate:"Taux march√© parall.",
        vehicle:"V√©hicule",
        brandNew:"Neuf",
        used:"Occasion",
        engine:"Type",
        electric:"√âlectrique",
        gasolineSmall:"Ess. ‚â§1800",
        gasolineLarge:"Ess. >1800",
        hybridSmall:"Hybr. ‚â§1800",
        hybridLarge:"Hybr. >1800",
        local:"Couts Local",
        inspection:"Inspection",
        doc:"Doc.",
        port:"Port/Transit",
        result:"Co√ªt Total (DZD)",
        detail:"Voir D√©tail",
        taxes:"Taxes",
        newCarTax:"Vignette Neuf",
        usedBest:"‚≠ê Meilleure valeur",
        saveUsed:"üí° Astuce: Choisissez Occasion pour √©viter la taxe neuf & taux plus bas!",
        switchUsedSave:"√âconomisez {0} DZD en passant √† une Occasion !"
      },
      ar:{
        title:"Dzair Sourcing Cars",
        subtitle:"ÿ≠ÿßÿ≥ÿ®ÿ© ÿ™ŸÉŸÑŸÅÿ© ÿßÿ≥ÿ™Ÿäÿ±ÿßÿØ ÿßŸÑÿ≥Ÿäÿßÿ±ÿßÿ™",
        carPrice:"ÿ≥ÿπÿ± ÿßŸÑÿ≥Ÿäÿßÿ±ÿ© (FOB)",
        currency:"ÿßŸÑÿπŸÖŸÑÿ©",
        freight:"ÿßŸÑÿ¥ÿ≠ŸÜ + ÿßŸÑÿ™ÿ£ŸÖŸäŸÜ",
        rate:"ÿ≥ÿπÿ± ÿßŸÑÿ≥ŸàŸÇ ÿßŸÑŸÖŸàÿßÿ≤Ÿä",
        vehicle:"ÿßŸÑŸÖÿ±ŸÉÿ®ÿ©",
        brandNew:"ÿ¨ÿØŸäÿØÿ©",
        used:"ŸÖÿ≥ÿ™ÿπŸÖŸÑÿ©",
        engine:"ŸÜŸàÿπ ÿßŸÑŸÖÿ≠ÿ±ŸÉ",
        electric:"ŸÉŸáÿ±ÿ®ÿßÿ¶Ÿä",
        gasolineSmall:"ÿ®ŸÜÿ≤ŸäŸÜ ‚â§1800",
        gasolineLarge:"ÿ®ŸÜÿ≤ŸäŸÜ >1800",
        hybridSmall:"Ÿáÿ¨ŸäŸÜ ‚â§1800",
        hybridLarge:"Ÿáÿ¨ŸäŸÜ >1800",
        local:"ÿ™ŸÉÿßŸÑŸäŸÅ ŸÖÿ≠ŸÑŸäÿ©",
        inspection:"ÿßŸÑŸÅÿ≠ÿµ",
        doc:"ÿßŸÑŸàÿ´ÿßÿ¶ŸÇ",
        port:"ÿßŸÑŸÖŸäŸÜÿßÿ°",
        result:"ÿßŸÑÿ™ŸÉŸÑŸÅÿ© ÿßŸÑŸÉŸÑŸäÿ© (ÿØÿ¨)",
        detail:"ÿπÿ±ÿ∂ ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ",
        taxes:"ÿßŸÑÿ∂ÿ±ÿßÿ¶ÿ®",
        newCarTax:"ÿ∂ÿ±Ÿäÿ®ÿ© ÿßŸÑÿ≥Ÿäÿßÿ±ÿ© ÿßŸÑÿ¨ÿØŸäÿØÿ©",
        usedBest:"‚≠ê ÿ£ŸÅÿ∂ŸÑ ÿßÿÆÿ™Ÿäÿßÿ±",
        saveUsed:"üí° ŸÜÿµŸäÿ≠ÿ©: ÿßÿÆÿ™ÿ± ŸÖÿ≥ÿ™ÿπŸÖŸÑÿ© ŸÑÿ™ŸàŸÅŸäÿ± ÿßŸÑÿ∂ÿ±ÿßÿ¶ÿ® Ÿàÿ±ÿ≥ŸàŸÖ ÿ£ŸÇŸÑ!",
        switchUsedSave:"ŸàŸÅÿ± {0} ÿØÿ¨ ÿπŸÜÿØ ÿßÿÆÿ™Ÿäÿßÿ± ŸÖÿ≥ÿ™ÿπŸÖŸÑÿ©!"
      },
      tz:{
        title:"Dzair Sourcing Cars",
        subtitle:"Amasid i tkerrust n lezzayer",
        carPrice:"Azal n tkerrust (FOB)",
        currency:"Tadrimt",
        freight:"Asiwed + Tasertit",
        rate:"Azal azeggan",
        vehicle:"Tkerrust",
        brandNew:"Tamaynut",
        used:"Tusniwin",
        engine:"Anaw",
        electric:"Elektrik",
        gasolineSmall:"Lisans ‚â§1800",
        gasolineLarge:"Lisans >1800",
        hybridSmall:"Ahybrid ‚â§1800",
        hybridLarge:"Ahybrid >1800",
        local:"Idrimen idigan",
        inspection:"Asenqed",
        doc:"Isemliyen",
        port:"Ama·∫ì/transit",
        result:"Am·∏çan Umulli (DZD)",
        detail:"Fket Tal…£ut",
        taxes:"Tiwsitin",
        newCarTax:"Tane…£ruft Tamaynut",
        usedBest:"‚≠ê Tafella tamezwarut",
        saveUsed:"üí° Anamur: Fren tusniwin ad tessekcem tax d tne…£ruft",
        switchUsedSave:"Sekcem {0} DZD ma fren tusniwin!"
      }
    };
    const usedCarTaxRates = {
      electric: {finalRate: 11.42}, gasolineSmall: {finalRate: 19.62}, gasolineLarge: {finalRate: 121.06},
      hybridSmall: {finalRate: 19.62}, hybridLarge: {finalRate: 121.06}
    };
    function num(n){return isNaN(+n)?0:+n;}
    function fDZD(x){return new Intl.NumberFormat('fr-DZ').format(Math.round(x))+' DZD';}
    function App(){
      const [lang,setLang] = useState('fr');
      const t = translations[lang];
      const [currency,setCurrency] = useState('USD');
      const [vehicleAge,setVehicleAge] = useState('used');
      const [engine,setEngine] = useState('gasolineSmall');
      const [carPrice,setCarPrice] = useState('');
      const [freight,setFreight] = useState('');
      const [blackRate,setBlackRate]=useState(232);
      const [local1,setLocal1] = useState('15000');
      const [local2,setLocal2] = useState('10000');
      const [local3,setLocal3] = useState('150000');
      const [showDetail,setShowDetail]=useState(false);

      let price = num(carPrice), ship = num(freight), rate = num(blackRate);
      let cost = price*rate, costFreight = ship*rate, localTotal = num(local1)+num(local2)+num(local3);
      let officialRate = currency==='USD'?135.5:145.3;
      let cif = (price+ship)*officialRate;
      let totalTax = 0, newCarTax = 0, taxes;
      let usedPreview, usedSave=0;
      if(vehicleAge==='new'){
        let dd = cif*0.15, tcs=cif*0.03, tva=(cif+dd+tcs)*0.19;
        newCarTax = 150000; totalTax = dd+tcs+tva;
        taxes = [dd,tcs,tva];
        let simUsed = cif*(usedCarTaxRates[engine].finalRate/100);
        usedPreview = cost+costFreight+localTotal+simUsed;
        usedSave = (cost+costFreight+localTotal+totalTax+newCarTax) - usedPreview;
      }else{
        totalTax = cif*(usedCarTaxRates[engine].finalRate/100);
      }
      let total = cost + costFreight + localTotal + totalTax + newCarTax;
      const languages = [
        {code:'fr', label:'üá´üá∑'},
        {code:'ar', label:'üá©üáø'},
        {code:'tz', label:'‚µú‚¥∞‚µé'}
      ];
      return (
        <div className={"max-w-md mx-auto mt-2 pb-2 " + (lang==='ar'?'rtl':'ltr')} style={{minHeight:'98vh'}}>
          {/* Header & language */}
          <div className="flex justify-between items-center">
            <div>
              <div className="text-[22px] font-bold text-dz-500 tracking-tight">{t.title}</div>
              <div className="text-xs text-gray-500">{t.subtitle}</div>
            </div>
            <div>
              {languages.map(l=>
                <button key={l.code} onClick={()=>setLang(l.code)} className="text-xl px-1" style={{opacity:lang===l.code?1:0.4}}>
                  {l.label}
                </button>
              )}
            </div>
          </div>
          {/* Main Inputs */}
          <div className="section mt-2">
            <div className="flex items-center mb-2 text-sm gap-2">
              <span className="font-semibold">{t.currency}:</span>
              {['USD','EUR'].map(c=>
                <button key={c} onClick={()=>setCurrency(c)}
                  className={`px-2.5 py-0.5 rounded font-bold text-xs ${currency===c ? 'bg-dz-500 text-white':'bg-gray-100 text-dz-500'}`}>
                  {c}
                </button>
              )}
            </div>
            <div className="flex gap-2 mb-2">
              <div style={{flex:2}}>
                <label className="text-xs font-semibold">{t.carPrice}</label>
                <input value={carPrice} min="0" type="number" onChange={e=>setCarPrice(e.target.value)}
                  placeholder={t.carPrice} />
              </div>
              <div style={{flex:1}}>
                <label className="text-xs font-semibold">{t.freight}</label>
                <input value={freight} min="0" type="number" onChange={e=>setFreight(e.target.value)}
                  placeholder={t.freight} />
              </div>
            </div>
            <div className="flex mb-2 gap-2">
              <div style={{flex:1}}>
                <label className="text-xs font-semibold">{t.rate}</label>
                <input value={blackRate} min="1" type="number" onChange={e=>setBlackRate(e.target.value)}
                  placeholder="USD/DZD"/>
              </div>
              <div style={{flex:1}}>
                <label className="text-xs font-semibold">{t.local}</label>
                <input value={local3} min="0" type="number" onChange={e=>setLocal3(e.target.value)}
                  placeholder={t.port}/>
              </div>
            </div>
            {/* Vehicle & Engine */}
            <div className="flex items-center mb-1.5 gap-2">
              <span className="font-semibold text-xs">{t.vehicle}:</span>
              {[
                {value:"new", label:t.brandNew},{value:"used",label:t.used}
              ].map(({value,label})=>
                <button key={value} onClick={()=>setVehicleAge(value)}
                  className={`px-2 py-0.5 rounded text-xs font-semibold ${vehicleAge===value?'bg-dz-500 text-white':'bg-gray-100 text-dz-500'}`}>
                  <span>
                    {label}
                    {value==="used" && <span className="best-badge">{t.usedBest}</span>}
                  </span>
                </button>
              )}
            </div>
            <div className="flex items-center mb-0 gap-2">
              <span className="font-semibold text-xs">{t.engine}:</span>
              {["electric","gasolineSmall","gasolineLarge"].map(e=>(
                <button key={e} onClick={()=>setEngine(e)}
                  className={`px-2 py-0.5 rounded text-xs ${engine===e?'bg-dz-500 text-white':'bg-gray-100 text-dz-500'}`}>
                  {t[e]||e}
                </button>
              ))}
            </div>
          </div>
          {/* Used promo for New */}
          {vehicleAge==='new' && !!carPrice && (
            <div className="cta-tip mb-1" style={{ direction: lang==='ar'?'rtl':'ltr'}}>
              <strong>{t.saveUsed}</strong><br/>
              {usedSave>0&&<span style={{color:'#057a44', fontWeight:'bold', fontSize:"13px"}}>
                {t.switchUsedSave.replace('{0}',fDZD(usedSave))}
              </span>}
            </div>
          )}
          {/* Result */}
          {carPrice && (
            <div className="section py-3 flex flex-col items-center gap-1 mb-1" style={{marginBottom:6}}>
              <div className="font-semibold text-xs mb-1">{t.result}</div>
              <div className="text-2xl font-black text-dz-500 mb-1">{fDZD(total)}</div>
              <div>
                <button onClick={()=>setShowDetail(v=>!v)}
                  className="text-dz-500 underline text-xs">
                  {t.detail}
                </button>
              </div>
              {showDetail && (
                <div style={{fontSize:"13px", background:"#f1f5f9", borderRadius:8, marginTop:7, padding:"7px 10px"}}>
                  <div>{t.carPrice}: <b>{fDZD(cost)}</b></div>
                  <div>{t.freight}: <b>{fDZD(costFreight)}</b></div>
                  <div>{t.local}: <b>{fDZD(localTotal)}</b></div>
                  <div>{t.taxes}: <b>{fDZD(totalTax)}</b></div>
                  {vehicleAge==='new' && <div>{t.newCarTax}: <b>{fDZD(newCarTax)}</b></div>}
                </div>
              )}
            </div>
          )}
          <div className="text-center text-xs text-gray-400 mt-2 opacity-70">
            ¬© 2025 Dzair Sourcing Cars
          </div>
        </div>
      );
    }
    ReactDOM.createRoot(document.getElementById("app")).render(<App />);
  </script>
</body>
</html>
